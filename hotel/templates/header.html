{% load static %}


<header class="main-header">

     <nav class="navbar navbar-expand-lg navbar-light sticky-top">
  <div class="container">
    <!-- <img src="{% static 'images/logo2.webp' %}" alt="Logo" width="40" height="40" class="me-2 rounded-circle shadow-sm"> -->
    <a class="navbar-brand" href="{% url 'home' %}">HotelBooking</a>
    <div>
  <form class="d-flex" id="hotel-search-form">
    <input id="hotel-search-input" class="form-control me-2" placeholder="Search city or hotel">
    <button class="btn btn-outline-success" type="submit">Search</button>
  </form>
</div>

<!-- Search results will appear here -->
<div id="search-results" class="row mt-3"></div>



  <!-- ðŸ”¹ Live Search JS -->
  <script>
    const searchInput = document.getElementById('hotel-search-input');
    const resultsDiv = document.getElementById('search-results');
    const searchForm = document.getElementById('hotel-search-form');

    searchForm.addEventListener('submit', function(e) {
        e.preventDefault();
    });

    searchInput.addEventListener('keyup', function() {
        const query = this.value;

        if(query.length === 0){
            resultsDiv.innerHTML = '';
            return;
        }

        fetch(`/search-hotels/?q=${query}`)
            .then(response => response.json())
            .then(data => {
                resultsDiv.innerHTML = '';

                data.hotels.forEach(hotel => {
                    resultsDiv.innerHTML += `
                        <div class="col-md-4 col-sm-6 mb-4">
                            <div class="search-result-card">
                                <img src="${hotel.image}" class="card-img-top" alt="hotel">
                                <div class="card-details">
                                    <h5 class="card-title">${hotel.name}</h5>
                                    <p class="card-text">${hotel.city}</p>
                                    <a href="/hotel/${hotel.id}/" class="btn btn-primary w-100">View</a>
                                </div>
                            </div>
                        </div>
                    `;
                });
            });
    });
  </script>

      <!-- AUTH LINKS -->
      <div class="auth-links">
        {% if user.is_authenticated %}
          <a href="{% url 'my_bookings' %}" class="nav-btn">My Bookings</a>
          <a href="{% url 'logout' %}" class="nav-btn logout">Logout</a>
        {% else %}
          <a href="{% url 'login' %}" class="nav-btn">Login</a>
          <a href="{% url 'register' %}" class="nav-btn register">Register</a>
        {% endif %}
      </div>
    </div>
  </div>
</header>
